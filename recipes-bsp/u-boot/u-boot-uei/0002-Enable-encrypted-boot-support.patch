From c3a93156df697edac88caecee76bdab8a51ca4b6 Mon Sep 17 00:00:00 2001
From: danie007 <danilselvan@gmail.com>
Date: Mon, 6 Dec 2021 13:31:52 +0530
Subject: [PATCH] Enable encrypted boot support

To be enabled along with secure boot configuration
- For UEI it's to be disabled by default

Signed-off-by: danie007 <danilselvan@gmail.com>
---
 configs/uei-pdna6sx-66Mhz_qspi_defconfig | 6 ++++++
 configs/uei-pdna6sx_qspi_defconfig       | 6 ++++++
 2 files changed, 12 insertions(+)

diff --git a/configs/uei-pdna6sx-66Mhz_qspi_defconfig b/configs/uei-pdna6sx-66Mhz_qspi_defconfig
index b68657ab71..e15535aa80 100644
--- a/configs/uei-pdna6sx-66Mhz_qspi_defconfig
+++ b/configs/uei-pdna6sx-66Mhz_qspi_defconfig
@@ -248,3 +248,9 @@ CONFIG_OF_LIBFDT=y
 # Added by Yocto to support the HAB features
 # (Secure boot)
 CONFIG_IMX_HAB=y
+
+# Added by Yocto to support the HAB features
+# (Encrypted boot)
+CONFIG_FAT_WRITE=y
+CONFIG_CMD_DEKBLOB=y
+CONFIG_CMD_PRIBLOB=y
diff --git a/configs/uei-pdna6sx_qspi_defconfig b/configs/uei-pdna6sx_qspi_defconfig
index fdc8d1a283..3a9f1573d0 100644
--- a/configs/uei-pdna6sx_qspi_defconfig
+++ b/configs/uei-pdna6sx_qspi_defconfig
@@ -248,3 +248,9 @@ CONFIG_OF_LIBFDT=y
 # Added by Yocto to support the HAB features
 # (Secure boot)
 CONFIG_IMX_HAB=y
+
+# Added by Yocto to support the HAB features
+# (Encrypted boot)
+CONFIG_FAT_WRITE=y
+CONFIG_CMD_DEKBLOB=y
+CONFIG_CMD_PRIBLOB=y
